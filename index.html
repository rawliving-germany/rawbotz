<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="rawbotz : Magento shop assistant ">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>rawbotz</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/rawliving-germany/rawbotz">View on GitHub</a>

          <h1 id="project_title">rawbotz</h1>
          <h2 id="project_tagline">Magento shop assistant </h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/rawliving-germany/rawbotz/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/rawliving-germany/rawbotz/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="rawbotz" class="anchor" href="#rawbotz" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Rawbotz</h1>

<p>Rawbotz provides a Web-Interface to do certain management tasks for a particular Magento Web-Shop (RawLiving Germany).</p>

<p>In this shop, products are supplied by different suppliers, of which one offers a magento-shop itself.</p>

<p>Rawbotz couples the <code>rawgento_db</code>, <code>rawgento_models</code> and <code>magento_remote</code> gems to make it easy to order items from this particular other shop and provides further functionality, e.g. accessing stock and sales history information.</p>

<p>Note that this git repository includes software components whose Copyright and License differ from the other parts.</p>

<p>These are</p>

<ul>
<li>Font Awesome (<a href="http://fontawesome.io/">http://fontawesome.io/</a>) in <code>lib/rawbotz/public/font-awesome-4.5.0</code>
</li>
<li>Pure CSS (<a href="http://purecss.io">http://purecss.io</a>) in <code>lib/rawbotz/public/pure-min.css</code>
</li>
<li>Chart.JS (<a href="http://chartjs.org">http://chartjs.org</a>) in <code>lib/rawbotz/public/Chart.min.js</code>
</li>
<li>jquery and jquery-ui (<a href="http://jquery.com">http://jquery.com</a>, <a href="http://jqueryui.com">http://jqueryui.com</a>) in <code>lib/rawbotz/public/jquery-2.2.0.min.js</code> and <code>lib/rawbotz/public/jui</code>
</li>
</ul>

<p>The copyright and license information is contained in the respective file headers. All other files are Copyright 2016 Felix Wolfsteller and licensed under the AGPLv3 (or any later).</p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h2>

<p>While bundling rawbotz up and installing it as a gem should be possible, it is strongly advised to install it via git.</p>

<p>Note that the dependencies should be handled with bundler if you are not running a development setup.</p>

<p>Anyway, the application is so specific to RawLiving Germanys needs that you probably want to get in contact first.</p>

<h2>
<a id="assumptions" class="anchor" href="#assumptions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Assumptions</h2>

<ul>
<li>supplier attribute</li>
<li>shelve attribute</li>
<li>packsize attribute</li>
<li>Ubuntu 14.04 installation, using rvm in an unprivileged users home.</li>
</ul>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h2>

<p>Until <code>rawgento_models</code>, <code>rawgento_db</code> and <code>magento_remote</code> (gems by same author) have settled, please adjust the <code>Gemfile</code> and checkout these gems in the parent folder.</p>

<h3>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuration</h3>

<p>Rawbotz combines the configuration files of <code>rawgento_db</code>, <code>rawgento_models</code> and <code>magento_remote</code> in a single file (default: <code>rawbotz.conf</code>).  In theory, the components configure themselves using their respective default configuration file paths.</p>

<h4>
<a id="unified-appraoch" class="anchor" href="#unified-appraoch" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Unified appraoch</h4>

<p>Create a <code>rawbotz.conf</code> YAML-file with the unified keys needed.  Note that you can pass the path to this configuration file to the various executables in <code>exe/</code>.</p>

<pre><code># Rawbotz own database
default: &amp;default
  adapter: sqlite3
  database: /home/rawbotz/database.sqlite
  encoding: utf8
  pool: 5
  timeout: 5000

development:
  &lt;&lt;: *default
test:
  &lt;&lt;: *default
  database: db/rawgento_test.db

# Local Magento MySQL database
host: 127.0.0.1
port: 3306
database: magento_shop_dbname
username: magento_db_username
password: magento_db_password
# Attributes needed
attribute_ids:
  name: 11
  supplier_name: 666
  shelve_nr: 42
  packsize: 1337

# Remote Magento Web Interface (for our mech)
remote_shop:
  base_uri: https://magentoshop.remote
  user: mylogin@email.address
  pass: whatnottobenamed

supplier_name: MagentoShop Remote

local_shop:
  base_uri: https://magentoshop.mine

mail:
  to: your@email.address
  from: senders@email.address
  host: email.address
  user: senders@email.user
  pass: senders.email.password
  port: 587
</code></pre>

<p>Then, tell RawbotzApp to eat your config via <code>exe/rawbotz -c rawbotz.conf</code>.
To have fun directly with rack instead use the environment variable <code>RAWBOTZ_CONFIG</code>, like in <code>RAWBOTZ_CONFIG=/home/rawbotz/rawbotz.conf rackup</code>.</p>

<h4>
<a id="reference-to-the-configurable-required-components" class="anchor" href="#reference-to-the-configurable-required-components" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Reference to the configurable required components</h4>

<p>Look in the corresponding gems to check how their configuration has to be done:</p>

<ul>
<li><a href="https://github.com/rawliving-germany/rawgento_db">rawgento_db s rawgento_db-config.yml</a></li>
<li><a href="https://github.com/rawliving-germany/rawgento_models">rawgento_models s db/config.yml</a></li>
<li><a href="https://github.com/fwolfst/magento_remote">magento_remotes config</a></li>
</ul>

<h5>
<a id="in-quick" class="anchor" href="#in-quick" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>In Quick</h5>

<p>Configure your database in db/config.yml (Rails style, <code>rawgento_models</code>).</p>

<p>Configure your magento mysql-connection in rawgento_db-config.yml (<code>rawgento_db</code>):
    host: myshop.shop
    port: 3306
    database: magento_myshop
    username: magento_myshop_dbuser
    password: magento_myshop_dbpassword</p>

<p>Finally, configure the remote shops credentials (<code>magento_remote</code>)</p>

<h2>
<a id="setup" class="anchor" href="#setup" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Setup</h2>

<p>Note that a script with basic support for maintenance-tasks is underway (exe/rawbotz_maintenance.sh).</p>

<h4>
<a id="setup-the-database" class="anchor" href="#setup-the-database" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Setup the database</h4>

<p>Run <code>rake db:setup</code> (if <code>db/schema.rb</code> is present) or <code>rake db:migrate</code> to setup the database.
Unfortunately, there is no way to pass in the config file, so for now you have to create <code>db/config.yml</code> (which can be nearly the same as <code>rawbotz.conf</code>) temporarily.</p>

<h4>
<a id="populate-the-database-with-local-and-remote-products" class="anchor" href="#populate-the-database-with-local-and-remote-products" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Populate the database with local and remote products</h4>

<p>E.g. with <code>bundle exec exe/rawbotz_update_local_products -c rawbotz.conf</code> .
This will query your magento MySQL database and create 'local' products, expect the command to run a while (minutes).</p>

<p>E.g. with <code>bundle exec exe/rawbotz_update_remote_products -c rawbotz.conf</code>
This will query the remote magento shop (scraping it via html GET requests) and create 'remote' products, expect the command to run a while longer (more minutes).  You might need to adapt parameters, depending on the remote shop.  <code>bundle exec exe/rawbotz_update_remote_products --help</code> gives you a hint on how to optimize your settings.</p>

<h4>
<a id="setup-mailing" class="anchor" href="#setup-mailing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Setup mailing</h4>

<p>Mails are sent via pony.</p>

<p>Create following <code>rawbotz.conf</code> section:</p>

<pre><code>mail:
  to: your@email.address
  from: senders@email.address
  host: email.address
  user: senders@email.user
  pass: senders.email.password
  port: 587
</code></pre>

<p>.  Multiple receipients can be addressed like this:</p>

<pre><code>mail:
  to:
    - your@email.address
    - colleagues@mail.address
</code></pre>

<p>.</p>

<h3>
<a id="deployment-or-web-app-startup" class="anchor" href="#deployment-or-web-app-startup" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Deployment or web-app startup</h3>

<p>You can run <code>(bundle exec) exe/rawbotz</code>, <code>rackup</code> or put rawbotz behind a phusion passenger.
There is a <code>-c</code> option to pass in a config file.</p>

<p>As usual, for <code>rackup</code> you can specify port (<code>-p</code>) and host (<code>-o</code>) parameters.  The path to config file has to be exposed as RAWBOTZ_CONFIG env var.</p>

<h3>
<a id="stock-history-update-via-cron" class="anchor" href="#stock-history-update-via-cron" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Stock History Update via cron</h3>

<p>Assuming an Ubuntu Server Setup, run <code>crontab -e</code> and add following line to fetch stock values every day at 03:00 am.</p>

<h3>
<a id="other-tools-included" class="anchor" href="#other-tools-included" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Other tools included</h3>

<h4>
<a id="rawbotz_update_local_products" class="anchor" href="#rawbotz_update_local_products" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>rawbotz_update_local_products</h4>

<p>Updates Products from magento MySQL database.  See <code>--help</code> for more information.</p>

<h2>
<a id="development" class="anchor" href="#development" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Development</h2>

<p>After checking out the repo, run <code>bin/setup</code> to install dependencies. You can also run <code>bin/console</code> for an interactive prompt that will allow you to experiment. Run <code>bundle exec rawbotz</code> to use the gem in this directory, ignoring other installed copies of this gem.</p>

<p>To install this gem onto your local machine, run <code>bundle exec rake install</code>. To release a new version, update the version number in <code>version.rb</code>, and then run <code>bundle exec rake release</code>, which will create a git tag for the version, push git commits and tags, and push the <code>.gem</code> file to <a href="https://rubygems.org">rubygems.org</a>.</p>

<p>You can <code>bundle console</code> to jump into a pre-setup irb, then call <code>RawgentoModels::establish_connection "rawbotz.conf"</code> to setup the database connection and deal with real world data.</p>

<h2>
<a id="contributing" class="anchor" href="#contributing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Contributing</h2>

<p>Bug reports and pull requests are welcome on GitHub at <a href="https://github.com/%5BUSERNAME%5D/rawbotz">https://github.com/[USERNAME]/rawbotz</a>. This project is intended to be a safe, welcoming space for collaboration, and contributors are expected to adhere to the <a href="http://contributor-covenant.org">Contributor Covenant</a> code of conduct.</p>

<p>Feel free to get in contact with me.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">rawbotz maintained by <a href="https://github.com/rawliving-germany">rawliving-germany</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
